<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <div id="app">{{name}}</div>
  <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script> -->
  <script src="./dist/vue.js"></script>
  <script>
    const vm = new Vue({  //watcher 渲染watcher
      el: '#app',
      data: {
        name: 'Jenny',
        age: {
          n: 100
        }
      },
      methods: {
        a() {
          console.log('ok');
        }
      },
      watch: {  //用户watcher
        name(newVal, oldVal) {
          console.log(newVal, oldVal);
        },
        name: [
          function (newVal, oldVal) {
            console.log(newVal, oldVal);
          },
          function (a, b) {
            console.log(a, b);
          }
        ],
        // name: 'a',
        // 'age.n'(newVal, oldVal) {
        //   console.log(newVal, oldVal)
        // }
      }
    })

    vm.$watch('name', function (newVal) {
      console.log(newVal);
    })

    setTimeout(() => {
      vm.name = 'Daisy';
      // vm.age.n = 18;
    }, 1000)
  </script>
</body>

</html>

<!-- vue中的嵌套层次不能太深，否则会有大量递归 -->
<!-- vue中对象是通过defineProperty实现响应式，拦截了get和set，如果不存在的属性不会拦截，也不会响应，可以使用$set让对象自己去notify，或者赋予一个新对象 -->
<!-- vue中的数组改索引和长度，是不会影响更新的，通过变异方法可以更新视图 7个方法，数组中如果是对象类型，修改对象也可以更新视图 -->